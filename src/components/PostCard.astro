---
// No images needed for simplified card

interface Props {
  title: string;
  description: string;
  date: Date;
  author: string;
  authorAvatar?: string;
  slug: string;
  image?: string;
  number?: number;
  cardHoverColor?: string;  // Color personalizado de hover para el título
}

const { title, description, date, author, authorAvatar, slug, number, cardHoverColor } = Astro.props;

const formattedDate = new Intl.DateTimeFormat('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
}).format(date);

// Color de hover personalizado o predeterminado
const hoverColor = cardHoverColor || '#C03540';
---

<article class="group relative">
  <a href={`/blog/${slug}`} class="block" data-hover-color={hoverColor}>
    <div class="flex gap-4 items-start">
      <!-- Small square icon with inset number badge -->
      <div class="relative w-14 h-14 md:w-20 md:h-20 rounded-lg bg-gray-300 overflow-hidden transition-colors flex items-center justify-center shrink-0 mt-0 md:mt-[22px] post-card-avatar">
        <img src={authorAvatar || "/profileIMG.png"} onerror="this.src='/profileIMG.png';this.onerror=null;" alt="Profile" class="absolute inset-0 w-full h-full object-cover rounded-lg" loading="lazy" />
        {number && (
          <div class="absolute top-0 right-0 w-5 h-5 md:w-6 md:h-6 rounded-md bg-black text-white text-[10px] md:text-xs font-bold flex items-center justify-center shadow-[0_0_0_2px_#F5F5F5] transition-colors post-card-number">
            {number}
          </div>
        )}
      </div>

      <!-- Content -->
      <div class="flex-1">
        <!-- Author & Date line -->
        <div class="flex items-center gap-2 text-[12px] leading-[16px] md:text-[16px] md:leading-[22px] text-neutral-500 font-pixel font-normal uppercase">
          <span>{author}</span>
          <span>—</span>
          <time datetime={date.toISOString()}>{formattedDate}</time>
        </div>

        <!-- Title -->
        <h2 class="mt-1 text-[20px] leading-[24px] md:text-[48px] md:leading-[53px] font-black text-black transition-colors post-card-title">
          {title}
        </h2>
      </div>

      <!-- No separate number badge; it is inset in the icon -->
    </div>
  </a>
</article>

<style define:vars={{ customHoverColor: hoverColor }}>
  /* Hover del título */
  .group:hover .post-card-title {
    color: var(--customHoverColor);
  }
  
  /* Hover del cuadradito del número */
  .group:hover .post-card-number {
    background-color: var(--customHoverColor);
  }
  
  /* Hover del fondo del avatar (efecto sutil) */
  .group:hover .post-card-avatar::before {
    content: '';
    position: absolute;
    inset: 0;
    background-color: var(--customHoverColor);
    opacity: 0.2;
    border-radius: 0.5rem;
    pointer-events: none;
  }
  
  .post-card-avatar {
    position: relative;
  }
</style>

