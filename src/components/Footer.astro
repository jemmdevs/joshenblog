---
interface Props {
  customFooterImage?: string;     // Imagen personalizada del footer (predeterminado: /footerIMG.png)
  customNavColor?: string;        // Color personalizado para botones (predeterminado: #C03540)
  customPageBackground?: string;  // Color de fondo del footer (predeterminado: #F5F5F5)
}

const { customFooterImage, customNavColor, customPageBackground } = Astro.props;

// Usar imagen y color personalizados o predeterminados
const footerImage = customFooterImage || '/footerIMG.png';
const navColor = customNavColor || '#C03540';
const navHoverColor = customNavColor ? customNavColor.replace('3540', '2F41') : '#b12e38'; // Variación más oscura para hover
const footerBg = customPageBackground || '#F5F5F5';

const currentYear = new Date().getFullYear();
---

<footer class="relative mt-20" style={`background-color: ${footerBg};`}>
  <div class="container mx-auto px-4 lg:px-8 py-16 lg:py-12 pb-36 relative z-10">
    <div class="grid grid-cols-12 gap-8">
      <!-- Left: Contact me -->
      <div class="col-span-12 lg:col-span-6">
        <div 
          class="text-sm font-semibold uppercase tracking-wide text-gray-700 inline-block"
          style="min-width: 100px;"
        >
          CONTACT ME
        </div>
        <div class="mt-3">
          <a 
            href="mailto:jemmdev@gmail.com" 
            class="inline-block py-2 font-medium transition-colors underline decoration-2 footer-email-link"
            style={`color: ${navColor}; text-underline-offset: 4px;`}
            data-hover-color={navHoverColor}
          >
            jemmdev@gmail.com
          </a>
        </div>
        <div class="mt-8 text-sm text-gray-600 hidden lg:block">© 2025 SENRI</div>
      </div>

      <!-- Right: Works + name + socials + copyright -->
      <div class="col-span-12 lg:col-span-6 flex flex-col lg:flex-row items-start justify-start lg:justify-end gap-4 lg:gap-6 z-10">
        <!-- Works button -->
        <a 
          href="https://josencv.vercel.app" 
          target="_blank" 
          rel="noopener noreferrer" 
          class="inline-flex items-center justify-center px-5 h-10 rounded-md text-white font-semibold transition-colors self-start footer-works-btn"
          style={`min-width: 140px; background-color: ${navColor};`}
          data-hover-color={navHoverColor}
        >
          View my Work
        </a>
        <div class="hidden lg:block w-px h-10 bg-gray-300"></div>
        <!-- Social links stacked (text) -->
        <nav class="flex flex-col text-gray-600 gap-2 self-start">
          <a 
            href="https://github.com/jemmdevs" 
            target="_blank" 
            rel="noopener noreferrer"
            class="transition-colors inline-block footer-social-link"
            style="min-width: 60px;"
            data-hover-color={navColor}
          >
            GitHub
          </a>
          <a 
            href="https://www.linkedin.com/in/jose-enrique-mateo-munoz-102b28374/" 
            target="_blank" 
            rel="noopener noreferrer"
            class="transition-colors inline-block footer-social-link"
            style="min-width: 75px;"
            data-hover-color={navColor}
          >
            LinkedIn
          </a>
        </nav>
      </div>
    </div>
  </div>

  <!-- Bottom thin red line -->
  <div class="absolute left-0 right-0 bottom-0 h-[4px]" style={`background-color: ${navColor};`}></div>

  <!-- Character image anchored to the bottom red line -->
  <img src={footerImage} alt="Footer art" class="pointer-events-none select-none [-webkit-user-select:none] [-webkit-user-drag:none] absolute bottom-1 left-1/4 md:left-1/3 lg:left-[45%] h-64 md:h-72 lg:h-80 object-contain z-0" loading="lazy" style="-webkit-user-select: none; -webkit-user-drag: none;" />

  <script>
    // Aplicar colores hover personalizados en footer
    function setupFooterCustomHoverColors() {
      // Works button hover
      const worksBtns = document.querySelectorAll('.footer-works-btn');
      worksBtns.forEach(btn => {
        const htmlBtn = btn as HTMLElement;
        const hoverColor = htmlBtn.getAttribute('data-hover-color');
        const originalColor = htmlBtn.style.backgroundColor;
        if (hoverColor) {
          htmlBtn.addEventListener('mouseenter', () => {
            htmlBtn.style.backgroundColor = hoverColor;
          });
          htmlBtn.addEventListener('mouseleave', () => {
            htmlBtn.style.backgroundColor = originalColor;
          });
        }
      });

      // Email link hover
      const emailLinks = document.querySelectorAll('.footer-email-link');
      emailLinks.forEach(link => {
        const htmlLink = link as HTMLElement;
        const hoverColor = htmlLink.getAttribute('data-hover-color');
        const originalColor = htmlLink.style.color;
        if (hoverColor) {
          htmlLink.addEventListener('mouseenter', () => {
            htmlLink.style.color = hoverColor;
          });
          htmlLink.addEventListener('mouseleave', () => {
            htmlLink.style.color = originalColor;
          });
        }
      });

      // Social links hover
      const socialLinks = document.querySelectorAll('.footer-social-link');
      socialLinks.forEach(link => {
        const htmlLink = link as HTMLElement;
        const hoverColor = htmlLink.getAttribute('data-hover-color');
        const originalColor = htmlLink.style.color;
        if (hoverColor) {
          htmlLink.addEventListener('mouseenter', () => {
            htmlLink.style.color = hoverColor;
          });
          htmlLink.addEventListener('mouseleave', () => {
            htmlLink.style.color = originalColor;
          });
        }
      });
    }

    setupFooterCustomHoverColors();
  </script>
</footer>